// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id    String @id @default(uuid())
  nome  String
  email String @unique
  cpf   String @unique
  senha String
  Pet   Pet[]

  @@map("usuario")
}

model Pet {
  id         String       @id @default(uuid())
  nome       String
  idade      Int
  sexo       Gender
  raca       String
  peso       Float
  cor        String
  id_usuario String
  usuario    Usuario      @relation(fields: [id_usuario], references: [id])
  Prontuario Prontuario[]

  @@map("pet")
}

model Prontuario {
  id               String             @id @default(uuid())
  id_prescricao    String
  prescricao       Prescricao         @relation(fields: [id_prescricao], references: [id])
  id_pet           String
  pet              Pet                @relation(fields: [id_pet], references: [id])
  VacinaProntuario VacinaProntuario[]

  @@map("prontuario")
}

model Prescricao {
  id          String       @id @default(uuid())
  medicamento String
  id_medico   String
  medico      Medico       @relation(fields: [id_medico], references: [id])
  Prontuario  Prontuario[]

  @@map("prescricao")
}

model Medico {
  id         String       @id @default(uuid())
  nome       String
  crm        String
  Prescricao Prescricao[]

  @@map("medico")
}

model Vacina {
  id               String             @id @default(uuid())
  nome             String
  data_aplicacao   DateTime
  substancia       String
  VacinaProntuario VacinaProntuario[]

  @@map("vacina")
}

model VacinaProntuario {
  id            String     @id @default(uuid())
  id_prontuario String
  prontuario    Prontuario @relation(fields: [id_prontuario], references: [id])
  id_vacina     String
  vacina        Vacina     @relation(fields: [id_vacina], references: [id])

  @@map("vacina_prontuario")
}

enum Gender {
  masc
  fem
}
